<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>The monitoring paper - LAB</title><meta name="description" content="Contrary to popular belief, monitoring an infrastructure is the opposite to just have some metrics about applications and network There are many many documents the lead this topic, one of the most interesting it's just few pages from Google around the art of slos or&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://www.k8s.it/the-monitoring-paper.html"><link rel="amphtml" href="https://www.k8s.it/amp/the-monitoring-paper.html"><link rel="alternate" type="application/atom+xml" href="https://www.k8s.it/feed.xml"><link rel="alternate" type="application/json" href="https://www.k8s.it/feed.json"><meta property="og:title" content="The monitoring paper - LAB "><meta property="og:image" content="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-17.47.24.png"><meta property="og:site_name" content="LAB"><meta property="og:description" content="Contrary to popular belief, monitoring an infrastructure is the opposite to just have some metrics about applications and network There are many many documents the lead this topic, one of the most interesting it's just few pages from Google around the art of slos or&hellip;"><meta property="og:url" content="https://www.k8s.it/the-monitoring-paper.html"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://www.k8s.it/media/website/eth0.ico" type="image/x-icon"><link rel="stylesheet" href="https://www.k8s.it/assets/css/style.css?v=2bb46f72d26d8f546479159fd70bdad6"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.k8s.it/the-monitoring-paper.html"},"headline":"The monitoring paper","datePublished":"2021-01-05T17:56","dateModified":"2021-01-05T19:11","image":{"@type":"ImageObject","url":"https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-17.47.24.png","height":666,"width":2648},"description":"Contrary to popular belief, monitoring an infrastructure is the opposite to just have some metrics about applications and network There are many many documents the lead this topic, one of the most interesting it's just few pages from Google around the art of slos or&hellip;","author":{"@type":"Person","name":"lgirardi","url":"https://www.k8s.it/authors/lgirardi/"},"publisher":{"@type":"Organization","name":"lgirardi"}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-179496482-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-179496482-1');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://www.k8s.it/">LAB</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://www.linkedin.com/in/lgirardi/">linkedin</a></li><li><a href="https://services.k8s.it/grafana/?orgId&#x3D;2">live monitoring</a></li><li><a href="https://www.k8s.it/whoami.html">whoami</a></li><li><a href="https://www.k8s.it/hobbies.html" target="_self">hobbies</a></li></ul></nav></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-17.47.24.png" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.47.24-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.47.24-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.47.24-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.47.24-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.47.24-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.47.24-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="666" width="2648" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-01-05T17:56">5 Jan 2021</time></div><h1>The monitoring paper</h1></div></header></div><div class="wrapper post__entry"><p>Contrary to popular belief, monitoring an infrastructure is the opposite to just have some metrics about applications and network</p><p>There are many many documents the lead this topic,<br>one of the most interesting it's just few pages from Google around <a href="https://static.googleusercontent.com/media/sre.google/it//static/pdf/art-of-slos-slides.pdf" target="_blank" rel="noopener noreferrer">the art of slos</a><br>or the <a href="https://www.k8s.it/media/files/The Art of SLOs - Google.pdf" target="_blank" rel="noopener noreferrer">book</a> version i took from a google onsite deep dive. <a href="https://www.k8s.it/media/files/The Art of SLOs - Google.pdf" target="_blank" rel="noopener noreferrer"></a></p><p>To better details this topic i'd like to use simple statements:</p><ul><li>WHAT</li><li>WHY</li><li>WHO</li><li>HOW</li></ul><p> </p><h3>WHAT </h3><p>This is probably the main argument we will discuss on this thread </p><p>There no magic formulas or tools to use, if you expect to buy a tool that work with metrics out of the box, you're wrong. <br>Tools are the infrastructure to store and visualize data... but first of all you need to collect the right data.</p><p>What is the DATA you need ?<br>Those are you will record moving yourself on the <span style="text-decoration: underline;">customer position</span></p><p><strong>Customer position</strong> : i'm using this term because i suppose you are not an onlus so you have a customer, but customer is a overall word with the meaning of all people are using your product:</p><ul><li>people that buy something e-commerce (Amazon, Bestbuy, Aliexpress)</li><li>people that use website to learn something (Cnn, Bloomberg, Wikipedia)</li><li>people that work on finance and use finance applications (Navision, SAP, JD Edwards)</li><li>people that use energy from nuclear site </li></ul><p>So moving yourself on the customer position you can better understand the definition of data that you need to know to better monitor your application with the righe <strong>customer metrics </strong></p><p>Stupid example ... imagine an automatic gate</p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-03-at-16.31.43.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-03-at-16.31.43-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-03-at-16.31.43-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-03-at-16.31.43-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-03-at-16.31.43-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-03-at-16.31.43-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-03-at-16.31.43-2xl.png 1600w" alt="" width="1092" height="522"></figure><p>What is the definition of "it's working?"</p><ul><li>it opens</li></ul><p>Obviously YES , but not only</p><ul><li>what about if it's not closing ? </li><li>what about if it opens in 10 minutes , it's acceptable ?</li><li>what about if after X times the automation is broken ? </li><li>etc etc ...</li></ul><p>As you can imagine we can define not only the objective values (open/close), we can elaborate customer subjective frustration , if i have to buy an automatic gate, i will not choose the one that will take 10 minutes to open... because... because 10 minutes are too much , based on subjective value as a customer.</p><p>In the same way we cannot say that our application is working because it's answers.</p><p>So <span style="text-decoration: underline;">what</span> we have to consider when we start to monitor an application in production?</p><p>Let's start with 3 macro clusters:</p><ul><li style="font-weight: 400;"><span style="font-weight: 400;"><strong>system</strong> resources, so all metrics related to the pod (cpu,network,...)</span></li><li style="font-weight: 400;"><span style="font-weight: 400;"><strong>application</strong> standard metrics (thread, gc, errors per minute, requests per minute, ... )</span></li><li style="font-weight: 400;"><span style="font-weight: 400;"><strong>business</strong> metrics that are inherent from the application scope, if the application provides a checkout for goods, we need to know for example how many transactions were fine and how many rejected</span></li></ul><p> </p><h4><strong>System</strong></h4><p>Those are the most easiest and used metrics since you started to monitor services.<br>On this group we have the basis metrics related to the system usage,<br>considering the evolution of the platform those values are day by day less influential than before.<br>This is because as soon we are increasing the technology level from bare metal, to vm , to docker to serverless ... the evaluation of those numbers could raise some mistake on the interpretation , however we still need to start with the basis in order to have data to define a trend based on specific situations</p><p>Here an example about the bare metal used as vsphere 6.7</p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-15.49.59.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.49.59-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.49.59-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.49.59-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.49.59-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.49.59-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.49.59-2xl.png 1600w" alt="" width="1024" height="371"></figure><p>always on the system metrics we can go more in deep checking a virtual machine inside this host, here the one i used to host my kubernetes lab</p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-15.53.29.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.53.29-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.53.29-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.53.29-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.53.29-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.53.29-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-15.53.29-2xl.png 1600w" alt="" width="1024" height="371"></figure><p>In the 2 images for example we can assume that we have something that move the cpu close to 100% cyclically (it's a <a href="https://www.k8s.it/kubernetes-sitespeedio.html">crawler</a> to perform check on website pages every hours)</p><p> </p><h4><strong>Application</strong></h4><p>It's time now to move inside the kubernetes cluster and check how is going on the a web application inside the cluster<br>Since this application it is springboot based, we have the opportunity to understand how is going on from a framework side (java) and behavioural interactions.<br>Response time server to server, server errors, client errors, sql interactions, garbage collector, sidecars (is a pod with multiple images) usage, logs creation , metrics creation etc etc</p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/app_metrics.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/app_metrics-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/app_metrics-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/app_metrics-md.png 768w, https://www.k8s.it/media/posts/20/responsive/app_metrics-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/app_metrics-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/app_metrics-2xl.png 1600w" alt="" width="1024" height="956"></figure><p>Having those in place you can understand from an application point of view how is going on the performances release by release.. what happen in case of bugs and critical condition (unexpected huge traffic) , the area where you can put you effort on improvements.</p><p> </p><h4><span style="font-weight: 400;"><strong>Business</strong></span></h4><p>OK system is covered , application is covered ... what about the customer perception ?</p><p>This is the most critical topic , if your application is part of a microservices funnel or a monolithic application that manage the entire product, it's supposed that in some way you have benefits from its performances</p><p>So move yourself on the customer position monitoring your website from a customer point of view with business metrics , in this simple case i just monitor the cms page on top <br>It's a website:</p><ul><li>so how long does it take have the page ?</li><li>which are the most relevant data you need to know to improve?</li><li>do you have the same trends every time ?</li><li>etc etc</li></ul><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/screencapture-services-k8s-it-grafana-d-000000053-pagesummary-influxdb-2021-01-05-17_07_37.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/screencapture-services-k8s-it-grafana-d-000000053-pagesummary-influxdb-2021-01-05-17_07_37-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/screencapture-services-k8s-it-grafana-d-000000053-pagesummary-influxdb-2021-01-05-17_07_37-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/screencapture-services-k8s-it-grafana-d-000000053-pagesummary-influxdb-2021-01-05-17_07_37-md.png 768w, https://www.k8s.it/media/posts/20/responsive/screencapture-services-k8s-it-grafana-d-000000053-pagesummary-influxdb-2021-01-05-17_07_37-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/screencapture-services-k8s-it-grafana-d-000000053-pagesummary-influxdb-2021-01-05-17_07_37-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/screencapture-services-k8s-it-grafana-d-000000053-pagesummary-influxdb-2021-01-05-17_07_37-2xl.png 1600w" alt="" width="1024" height="3021"></figure><p> </p><p> </p><h3>WHY</h3><p>With those cluster of metrics we can define and plan the architecture and the forecasting for the company ... remember that when something goes wrong with no metrics you will probably cascade to situation like this</p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-17.41.07.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.41.07-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.41.07-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.41.07-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.41.07-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.41.07-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.41.07-2xl.png 1600w" alt="" width="1024" height="441"></figure><p> </p><p><strong>System</strong> metrics can share the usages and the density of you infrastructure creating the basis <span style="text-decoration: underline;">alerts</span> in case of suffering but also plan the evolution of the platform itself  </p><p><span style="font-weight: 400;"><strong>Application </strong>metrics share the framework behaviour and the evolution of your application day by day , <span style="text-decoration: underline;">alerts</span> are defined to monitor the scalability, bugs and application behaviour</span></p><p><strong>Business <span style="font-weight: 400;">metrics share the thresholds to use as alerts but not only... </span><br></strong>In this example we are talking about a web application<br>If you are selling something through it ,conversion is always the most relevant buzzword</p><p>From the 100 visitors , who will continue the navigation till the purchase, the remaining are really a small slice (e-commerce for example)</p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/conversion-impact-score-funnel-NEW.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/conversion-impact-score-funnel-NEW-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/conversion-impact-score-funnel-NEW-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/conversion-impact-score-funnel-NEW-md.png 768w, https://www.k8s.it/media/posts/20/responsive/conversion-impact-score-funnel-NEW-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/conversion-impact-score-funnel-NEW-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/conversion-impact-score-funnel-NEW-2xl.png 1600w" alt="" width="800" height="647"></figure><p>This images comes from an 2015 <a href="https://blogs.akamai.com/2015/07/conversion-impact-score-what-is-it-and-why-do-you-need-to-know-yours.html" target="_blank" rel="noopener noreferrer">article</a> from Akamai that is really still actual ...<br>Conversion is always impacted by page response time , more close you are in the first navigation phases like searching rather than checkout where you probably have more clear will to purchase<br><br>Now we know the data around the usage of our website and we can create <strong>GOALs</strong> and <strong>KPI</strong> to improve those values in order to better fit with the customer expectation.</p><p> </p><p> </p><h3>WHO</h3><p>Those actors could be different case by case, from a small company to an enterprise, even if you are a full stack whateverops, a developer or part of monitoring team, in this scope you should not be alone. </p><p><strong>System</strong> and <strong>Application</strong> are usually managed by <span style="text-decoration: underline;">sre/devops/sysadmin</span> with the help of architecture/developer to define the best framework metrics to monitor.</p><p>On the opposite side <strong>Business </strong>are more close with the product side, who will be better than the <span style="text-decoration: underline;">product dept</span> (developers) itself defining the kpi and goals used as a metrics with the cooperation of the <span style="text-decoration: underline;">business dept</span> to define the <strong><span style="font-weight: 400;">thresholds.</span></strong></p><p>This cooperation will be useful to define:</p><ul><li style="font-weight: 400;"><span style="font-weight: 400;">Right alerts to right people</span></li><li style="font-weight: 400;"><span style="font-weight: 400;">Support granted by ownership</span></li><li style="font-weight: 400;"><span style="font-weight: 400;">No speculations, real data</span></li></ul><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-17.39.10.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.39.10-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.39.10-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.39.10-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.39.10-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.39.10-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.39.10-2xl.png 1600w" alt="" width="1024" height="346"></figure><p> </p><h3><strong>HOW</strong></h3><p> </p><h4>Infrastructure</h4><p>First of all you have to define the monitoring/alerting platform, <br>the suggestion is to have this platform scalable with a good UI (grafana) to work with backend storage (prometheus + cortex/thanos, graphite + carbonzipper, influxdb, etc etc)</p><p>Honestly if you are in a big environment and you make a mistake in metrics configuration with graphite (push model) you can saturate the space since every time you create a new metric you are creating whisper file with the dimension based on the retention schema.<br>I prefer prometheus (pull model) that could prevent those issues and better fit the kubernetes standars , will be also more easy create a /metrics page on your application rather than use sidecar pods to stream metrics with collectd/telegraf/statsd and so on.</p><h4> </h4><h4>Less is more</h4><p><span style="font-weight: 400;">How many metrics are enough to create a valid alert?</span></p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-17.48.07.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.48.07-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.48.07-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.48.07-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.48.07-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.48.07-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.48.07-2xl.png 1600w" alt="" width="1024" height="764"></figure><p>The more metrics identify the service behaviour the more we can create a dedicated alert...<br>anyway  ....<br>The anti-pattern model currently applied in some cases:<br>have tons of metrics that generate only <strong>noise</strong> without identifying the healthiness of a service</p><p><em>Keep it simple</em> and define the structure of your <span style="text-decoration: underline;">System,</span> <span style="text-decoration: underline;">Application</span> and <span style="text-decoration: underline;">Business</span> metrics .</p><p> </p><h4>Smart metrics</h4><p><span style="font-weight: 400;">It’s not only ONE value that show off the healthiness, but the combination of multiple metrics that guarantee the status</span></p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-17.46.34.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.34-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.34-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.34-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.34-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.34-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.34-2xl.png 1600w" alt="" width="1024" height="303"></figure><p>This concept is really important, imagine a dynamic infrastructure based on kubernetes <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/" target="_blank" rel="noopener noreferrer">HPA</a> </p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-18.22.01.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-18.22.01-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-18.22.01-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-18.22.01-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-18.22.01-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-18.22.01-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-18.22.01-2xl.png 1600w" alt="" width="1024" height="632"></figure><p>where you can probable have some value linear (like thread), mitigated by the horizontal autoscaling, you should combine multiple values to define the application status.</p><p>Create the metrics alert with <strong>trends</strong> not with the pure number <br>Ex. 70 threads value alone make no sense , different applications has different threads value , what is important is the <strong>delta , </strong>the percentage is useful to understand the behaviour, +50% threads make sense in all applications rather than the effective number.<br><br></p><figure class="post__image post__image--center"><img loading="lazy" src="https://www.k8s.it/media/posts/20/Screenshot-2021-01-05-at-17.46.55.png" sizes="100vw" srcset="https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.55-xs.png 300w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.55-sm.png 480w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.55-md.png 768w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.55-lg.png 1024w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.55-xl.png 1360w, https://www.k8s.it/media/posts/20/responsive/Screenshot-2021-01-05-at-17.46.55-2xl.png 1600w" alt="" width="1024" height="656"></figure><p> </p><p>Be smart also on the evaluation with standard deviation and <strong>percentile</strong> ... mean is usually dropping the relevant value to evaluate performances under stress</p><p> </p><p> </p><p> </p><p> </p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 5 Jan 2021</p><ul class="post__tag"><li><a href="https://www.k8s.it/alerting/">alerting</a></li><li><a href="https://www.k8s.it/application-metrics/">application metrics</a></li><li><a href="https://www.k8s.it/business-metrics/">business metrics</a></li><li><a href="https://www.k8s.it/conversion/">conversion</a></li><li><a href="https://www.k8s.it/customer-experience/">customer experience</a></li><li><a href="https://www.k8s.it/metrics/">metrics</a></li><li><a href="https://www.k8s.it/observability/">observability</a></li><li><a href="https://www.k8s.it/sla/">sla</a></li><li><a href="https://www.k8s.it/sli/">sli</a></li><li><a href="https://www.k8s.it/slo/">slo</a></li><li><a href="https://www.k8s.it/system-metrics/">system metrics</a></li></ul><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.k8s.it%2Fthe-monitoring-paper.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fwww.k8s.it%2Fthe-monitoring-paper.html&amp;via=LAB&amp;text=The%20monitoring%20paper" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.k8s.it%2Fthe-monitoring-paper.html" class="js-share linkedin" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://buffer.com/add?text=The%20monitoring%20paper&amp;url=https%3A%2F%2Fwww.k8s.it%2Fthe-monitoring-paper.html" class="js-share buffer" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#buffer"/></svg> <span>Buffer</span> </a><a href="https://api.whatsapp.com/send?text=The%20monitoring%20paper https%3A%2F%2Fwww.k8s.it%2Fthe-monitoring-paper.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://www.k8s.it/authors/lgirardi/" rel="author">lgirardi</a></h3><p>If it isn&#x27;t there, it can&#x27;t break.</p></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://www.k8s.it/maximum-yield-with-minimum-expense.html" class="post__nav-link" rel="prev"><span>Previous</span> Maximum yield with minimum expense for a static website</a></div><div class="post__nav-next"><a href="https://www.k8s.it/ambient-sensor-for-mere-mortal.html" class="post__nav-link" rel="next"><span>Next</span> Ambient sensor for mere mortal </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__comments"><div class="wrapper"></div></div></main><footer class="footer"><div class="footer__social"><a href="https://www.linkedin.com/in/lgirardi/" aria-label="LinkedIn"><svg><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#linkedin"/></svg></a></div><div class="footer__copyright"><p>.</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://www.k8s.it/assets/js/scripts.min.js?v=6ca8b60e6534a3888de1205e82df8528"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="cookie-popup js-cookie-popup cookie-popup--uses-badge"><h2>This website uses cookies</h2><p>Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="#not-specified"></a></p><form><input id="gdpr-necessary" name="gdpr-necessary" checked="checked" disabled="disabled" type="checkbox"> <label for="gdpr-necessary">Required</label> <input id="gdpr-functions" name="gdpr-functions" type="checkbox"> <label for="gdpr-functions">Functionality</label> <input id="gdpr-analytics" name="gdpr-analytics" type="checkbox"> <label for="gdpr-analytics">Analytical</label> <input id="gdpr-marketing" name="gdpr-marketing" type="checkbox"> <label for="gdpr-marketing">Marketing</label><p class="cookie-popup__save-wrapper"><button type="submit" class="cookie-popup__save">Save</button></p></form><span class="cookie-popup-label">Cookie Policy</span></div><script>(function() {
                function addScript (src, inline) {
                    var newScript = document.createElement('script');

                    if (src) {
                        newScript.setAttribute('src', src);
                    }

                    if (inline) {
                        newScript.text = inline;
                    }

                    document.body.appendChild(newScript);
                }

                var popup = document.querySelector('.js-cookie-popup');
                var checkboxes = popup.querySelectorAll('input[type="checkbox"]');
                var save = popup.querySelector('button');
                var currentConfig = localStorage.getItem('publii-gdpr-allowed-cookies');
                var blockedScripts = document.querySelectorAll('script[type^="gdpr-blocker/"]');
                

                popup.addEventListener('click', function() {
                    if (!popup.classList.contains('cookie-popup--is-sticky')) {
                        popup.classList.add('cookie-popup--is-sticky');
                    }
                });

                save.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    popup.classList.remove('cookie-popup--is-sticky');
                    var allowedGroups = [];

                    for (var i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i].checked) {
                            var groupName = checkboxes[i].getAttribute('name').replace('gdpr-', '');
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + groupName + '"]');

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }
                            
                            var groupEvent = new Event('publii-cookie-banner-unblock-' + groupName);
                            document.body.dispatchEvent(groupEvent);
                            allowedGroups.push(groupName);
                        }
                    }

                    localStorage.setItem('publii-gdpr-allowed-cookies', allowedGroups.join(','));
                    popup.classList.remove('cookie-popup--is-sticky');

                    setTimeout(function () {
                        if (currentConfig !== null) {
                            window.location.reload();
                        }
                    }, 250);
                });

                if (currentConfig === null) {
                    popup.classList.add('cookie-popup--is-sticky');
                    var checkedGroups = popup.querySelectorAll('input[type="checkbox"]:checked');

                    for (var i = 0; i < checkedGroups.length; i++) {
                        var allowedGroup = checkedGroups[i].name.replace('gdpr-', '');

                        if (allowedGroup !== '-' && allowedGroup !== '') {
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }

                            var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
                            document.body.dispatchEvent(groupEvent);
                        }
                    }
                } else {
                    if (currentConfig !== '') {
                        var allowedGroups = currentConfig.split(',');
                        var checkedCheckboxes = popup.querySelectorAll('input[type="checkbox"]:checked');

                        for (var j = 0; j < checkedCheckboxes.length; j++) {
                            var name = checkedCheckboxes[j].name.replace('gdpr-', '');

                            if (allowedGroups.indexOf(name) === -1) {
                                checkedCheckboxes[j].checked = false;
                            }
                        }

                        for (var i = 0; i < allowedGroups.length; i++) {
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroups[i] + '"]');
                            var checkbox = popup.querySelector('input[type="checkbox"][name="gdpr-' + allowedGroups[i] + '"]');

                            if (checkbox) {
                                checkbox.checked = true;
                            }

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }

                            var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroups[i]);
                            document.body.dispatchEvent(groupEvent);
                        }
                    }
                }
            })();</script></body></html>