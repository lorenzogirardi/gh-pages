<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Maximum yield with minimum expense for a static website - LAB</title><meta name="description" content="Great marketing quote, however i think we can better share a value that is always true... keep it simple, keep it safe. I would structure this article in few relevant topics Each of the above could be a specific topic that will fit others use&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://www.k8s.it/maximum-yield-with-minimum-expense.html"><link rel="amphtml" href="https://www.k8s.it/amp/maximum-yield-with-minimum-expense.html"><link rel="alternate" type="application/atom+xml" href="https://www.k8s.it/feed.xml"><link rel="alternate" type="application/json" href="https://www.k8s.it/feed.json"><meta property="og:title" content="Maximum yield with minimum expense for a static website - LAB "><meta property="og:site_name" content="LAB"><meta property="og:description" content="Great marketing quote, however i think we can better share a value that is always true... keep it simple, keep it safe. I would structure this article in few relevant topics Each of the above could be a specific topic that will fit others use&hellip;"><meta property="og:url" content="https://www.k8s.it/maximum-yield-with-minimum-expense.html"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://www.k8s.it/media/website/eth0.ico" type="image/x-icon"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root{--body-font:'Ubuntu',sans-serif;--heading-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--logo-font:'Ubuntu',sans-serif;--menu-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://www.k8s.it/assets/css/style.css?v=820a54c74580600c7009761ebe91f3e7"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.k8s.it/maximum-yield-with-minimum-expense.html"},"headline":"Maximum yield with minimum expense for a static website","datePublished":"2020-12-24T20:53","dateModified":"2020-12-26T15:27","description":"Great marketing quote, however i think we can better share a value that is always true... keep it simple, keep it safe. I would structure this article in few relevant topics Each of the above could be a specific topic that will fit others use&hellip;","author":{"@type":"Person","name":"lgirardi"},"publisher":{"@type":"Organization","name":"lgirardi"}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-179496482-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-179496482-1');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://www.k8s.it/">LAB</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://www.linkedin.com/in/lgirardi/">linkedin</a></li><li><a href="https://services.k8s.it/grafana/?orgId&#x3D;2">live monitoring</a></li><li><a href="https://www.k8s.it/whoami.html">whoami</a></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="https://www.k8s.it/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="search..." aria-label="search..." autofocus="autofocus"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://www.k8s.it/media/website/hero_image.png" srcset="https://www.k8s.it/media/website/responsive/hero_image-xs.png 300w, https://www.k8s.it/media/website/responsive/hero_image-sm.png 480w, https://www.k8s.it/media/website/responsive/hero_image-md.png 768w, https://www.k8s.it/media/website/responsive/hero_image-lg.png 1024w, https://www.k8s.it/media/website/responsive/hero_image-xl.png 1360w, https://www.k8s.it/media/website/responsive/hero_image-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2020-12-24T20:53">24 Dec 2020</time></div><h1>Maximum yield with minimum expense for a static website</h1></div></header></div><div class="wrapper post__entry"><p>Great marketing quote, however i think we can better share a value that is always true...<br><em><span style="text-decoration: underline;">keep it simple, keep it safe.</span></em></p><p>I would structure this article in few relevant topics</p><ul><li>Static website</li><li>Tools</li><li>Security</li><li>Monitor</li></ul><p>Each of the above could be a specific topic that will fit others use cases</p><p><em>This is not a post about how to create a blog... this post will inspect into some technology that can simplify your life or your work with small but important concepts</em></p><p> </p><h3>Static website</h3><p>Among the famous open cms i tried probably all of those,  during my career.<br>Basically are a web application with a sql database in most of the cases.</p><p>Now we can discuss about the meaning of content generation , that should be dynamic and be part of the user experience rather than a page generated, however today i will talk just about the usage of a cms for a static(tbd) reality.</p><p>If your goal is promote your company, your hobbies, your work ... you have already heard about wordpress, joomla, drupal etc etc ... that are good (if not directly exposed) but had a huge problem... since are open and used by a relevant number of people, are subjected of vulnerability, moreover , if you install plugins the situation could be dramatic.</p><p>As much you install <strong>plugins</strong> (and really some cms are not able to do anything with a plugin),<br>as much your website is bloat.<br>With the same ratio the <span style="text-decoration: underline;">performances will decrease.</span></p><p>On top of this, a <span style="text-decoration: underline;">huge</span> percentage of the plugins in the cms repository are old and out of date yet still available to install on your system.</p><p>So if you don't need something special (most of the blogs are wordpress only because it's easy to use) and you want to create a static website for your company, your business and so on , you can probably evaluate something different looking for , the first pillar mentioned, keep it simple.<br>Moreover the trend in a enterprise is moving from dynamic content to static as per the <strong>speed</strong> is the major KPI for a website</p><p>On a secondary binary in the last years the static cms are growth</p><ul><li>Jekyll</li><li>Gatsby</li><li>Siteleaf</li><li>Netlify</li><li>Hugo</li><li>$whatever-js (every day we have a new js framework)</li><li>etc etc</li></ul><p>However if you are not so nerd ... or your are tremendously lazy (like me)<br>a grate alternative is <a href="https://getpublii.com/">Publii</a></p><p>Publii includes a WYSIWYG (What You See Is What You Get) editor for content creation,<br>really easy to use , and the client is available for multiple platform (win,linux,mac)</p><p> </p><p> </p><p> </p><h3>Tools</h3><p>I mentioned Publii before, this tool is just a simple way for lazy people to create a static website, i'll not go in deep with this software since is well explained in its website however offer multiple possibility where store the files , the main ones are s3 bucket and github pages.<br>Publii is not a pretty collaborative tool but is not supposed to have this kind of interaction on a static website, is more close to a human interaction only.<br><span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">On the opposite side Jekyll and the other families are more close to be collaborative based on a git project and part of a pipeline flow (runner/actions)</span></p><p> </p><p>Based on the backend for you html files, lets explore the <a href="https://pages.github.com/">github pages</a><br>This service is free with few limits<br><em>Published GitHub Pages sites may be no larger than 1 GB.</em><br><em>GitHub Pages sites have a soft bandwidth limit of 100GB per month.</em><br><em>GitHub Pages sites have a soft limit of 10 builds per hour.</em></p><p>It's really easy to use and demand the security on the github account (always 2fa)<br>They offer a dns based on your github account and you can manage paths,<br>moreover you have the TLS/SSL for free</p><p>With Publii configuration is quite easy and you can follow the instruction <a href="https://getpublii.com/docs/host-static-website-github-pages.html">here</a> </p><p> </p><p>Another solution is use s3 as a repository, this require a bit more stuff sometimes, however even if it's a cheeper option, why not use an s3 on-prem if it's available <br>(this is just an excuse to use kubernetes, i still suggest to use the github pages however i like to have this exercise)</p><p>So welcome <a href="https://min.io/">minio</a> , a kubernetes object storage<br>The configuration is quite simple, as usual you can start with the namespace creation<br><code>kind: "Namespace"<br>apiVersion: "v1"<br>metadata:<br>  name: "minio"<br>  labels:<br>    name: "minio"</code></p><p>The service (this is just a single instance so no StatefulSets set is needed)<br><code>apiVersion: v1<br>kind: Service<br>metadata:<br>  name: minio-svc<br>  namespace: minio<br>  labels:<br>    app: minio<br>spec:<br>  ports:<br>  - port: 9000<br>    protocol: TCP<br>  selector:<br>    app: minio</code></p><p>PersistentVolumeClaim (from microk8s host provisioner)<br><code>apiVersion: v1<br>kind: PersistentVolumeClaim<br>metadata:<br>  namespace: minio<br>  name: minio-pv-claim<br>  labels:<br>    app: minio-storage-claim<br>spec:<br>  storageClassName: microk8s-hostpath<br>  accessModes:<br>    - ReadWriteOnce<br>  resources:<br>    requests:<br>      storage: 1Gi</code></p><p>Deployment (remember to use secrets instead write directly into deployment)<br><code>kind: Deployment<br>metadata:<br>  name: minio-deployment<br>  namespace: minio<br>spec:<br>  selector:<br>    matchLabels:<br>      app: minio<br>  strategy:<br>    type: Recreate<br>  template:<br>    metadata:<br>      labels:<br>        app: minio<br>    spec:<br>      volumes:<br>      - name: storage<br>        persistentVolumeClaim:<br>          claimName: minio-pv-claim<br>      containers:<br>      - name: minio<br>        image: minio/minio:latest<br>        args:<br>        - server<br>        - /storage<br>        env:<br>        - name: MINIO_ACCESS_KEY<br>          value: "$something"<br>        - name: MINIO_SECRET_KEY<br>          value: "$somethingsecret"<br>        - name: MINIO_DOMAIN<br>          value: minio.h4x0r3d.lan<br>        ports:<br>        - containerPort: 9000<br>          hostPort: 9000<br>        volumeMounts:<br>        - name: storage<br>          mountPath: "/storage"</code></p><p>An at the end the ingress resource<br><code>kind: Ingress<br>metadata:<br>  name: minio-ingress<br>  namespace: minio<br>  annotations:<br>    kubernetes.io/ingress.class: nginx<br>    nginx.org/client-max-body-size: 1000m<br>    ingress.kubernetes.io/proxy-body-size: 1000m<br>spec:<br>  rules:<br>  - host: minio.h4x0r3d.lan<br>    http:<br>      paths:<br>      - path: /<br>        backend:<br>          serviceName: minio-svc<br>          servicePort: 9000</code></p><p>At the end you will have something like this</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/Screenshot-2020-12-26-at-13.55.38.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.55.38-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.55.38-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.55.38-md.png 768w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.55.38-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.55.38-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.55.38-2xl.png 1600w" alt="" width="1722" height="1140"></figure><p>and you can configure Publii in this way</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/Screenshot-2020-12-26-at-13.56.43.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.56.43-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.56.43-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.56.43-md.png 768w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.56.43-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.56.43-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-13.56.43-2xl.png 1600w" alt="" width="1882" height="1490"></figure><p>Btw an object storage is <strong>NOT</strong> a web server so you need an apache or nginx configuration<br>to have the site ready to be used<br><code>&lt;VirtualHost *:80&gt;<br>    ServerAdmin l@k8s.it<br>    DocumentRoot /usr/local/apache2/htdocs/<br>    ServerName www.k8s.it<br>    ErrorLog logs/www.k8s-error_log<br>    CustomLog logs/www.k8s-access_log combined<br>    LoadModule rewrite_module modules/mod_rewrite.so<br>    ProxyRequests Off<br>    ProxyPass / http://minio-svc.minio.svc.cluster.local:9000/blog/<br>    RewriteEngine on<br>    RewriteRule ^(.*)/$ /$1/index.html [PT,L]<br> &lt;/VirtualHost&gt;</code></p><p> </p><p>Again ... <strong>keep it simple</strong>... there no right solutions overall , there is the right way for you needs, in my case i'm still using github pages because are free, enough to cover my needs and <em>serverless</em></p><h3> </h3><h3>Security</h3><p>Even if the security is demanded to github, why not extend a sort of protection on top of it</p><p>Second pillar , <em>keep it safe</em></p><p>In my case i really appreciate Cloudflare and the free plan that give me the possibility to test and explore the functionality offered</p><p>I've already shared how to configure a website with Cloudflare with terraform <a href="https://www.k8s.it/terraform-your-free-claudflare-account.html" target="_blank" rel="noopener noreferrer">https://www.k8s.it/terraform-your-free-claudflare-account.html</a></p><p>Even if we are covered by attacks since it's static webpage ... and we also added the Cloudflare protection we can have some <em>cosmetics</em> feature that will share a better compliance with the security in 2020</p><p>As i said github pages and s3 are not webserver so ... how we can introduce the security headers ?</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/screencapture-securityheaders-2020-12-24-20_33_23.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_33_23-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_33_23-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_33_23-md.png 768w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_33_23-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_33_23-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_33_23-2xl.png 1600w" alt="" width="2880" height="4944"></figure><p> </p><p>Again Cloudflare help us with the <a href="https://blog.cloudflare.com/cloudflare-workers-unleashed/" target="_blank" rel="noopener noreferrer">Workers</a> feature</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-edit-security-headers-2020-12-24-20_38_25-2.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-edit-security-headers-2020-12-24-20_38_25-2-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-edit-security-headers-2020-12-24-20_38_25-2-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-edit-security-headers-2020-12-24-20_38_25-2-md.png 768w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-edit-security-headers-2020-12-24-20_38_25-2-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-edit-security-headers-2020-12-24-20_38_25-2-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-edit-security-headers-2020-12-24-20_38_25-2-2xl.png 1600w" alt="" width="2880" height="1450"></figure><p>The code (<a href="https://scotthelme.co.uk/security-headers-cloudflare-worker/" target="_blank" rel="noopener noreferrer">rif</a>.) is adding those headers with serverless function  for each request</p><p><code>const securityHeaders = {<br>        "Content-Security-Policy": "upgrade-insecure-requests",<br>        "Strict-Transport-Security": "max-age=3600",<br>        "X-Xss-Protection": "1; mode=block",<br>        "X-Frame-Options": "DENY",<br>        "X-Content-Type-Options": "nosniff",<br>        "Permissions-Policy": "geolocation=()",<br>        "Referrer-Policy": "strict-origin-when-cross-origin"<br>    };<br><br><br>async function addHeaders(req) {<br>    const response = await fetch(req),<br>        newHeaders = new Headers(response.headers),<br>        setHeaders = Object.assign({}, securityHeaders);<br><br>    if (newHeaders.has("Content-Type") &amp;&amp; !newHeaders.get("Content-Type").includes("text/html")) {<br>        return new Response(response.body, {<br>            status: response.status,<br>            statusText: response.statusText,<br>            headers: newHeaders<br>        });<br>    }<br><br>    Object.keys(setHeaders).forEach(name =&gt; newHeaders.set(name, setHeaders[name]));<br><br><br>    return new Response(response.body, {<br>        status: response.status,<br>        statusText: response.statusText,<br>        headers: newHeaders<br>    });<br>}<br><br>addEventListener("fetch", event =&gt; event.respondWith(addHeaders(event.request)));</code></p><p> </p><p>Now the website is better from this point of view, adding the worker to the main route</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-k8s-it-workers-2020-12-24-20_36_05.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-k8s-it-workers-2020-12-24-20_36_05-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-k8s-it-workers-2020-12-24-20_36_05-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-k8s-it-workers-2020-12-24-20_36_05-md.png 768w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-k8s-it-workers-2020-12-24-20_36_05-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-k8s-it-workers-2020-12-24-20_36_05-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-k8s-it-workers-2020-12-24-20_36_05-2xl.png 1600w" alt="" width="2880" height="2428"></figure><p>Results</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/screencapture-securityheaders-2020-12-24-20_34_27.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_34_27-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_34_27-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_34_27-md.png 768w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_34_27-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_34_27-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/screencapture-securityheaders-2020-12-24-20_34_27-2xl.png 1600w" alt="" width="2880" height="5510"></figure><p>Just a warning because Strict-Transport-Security has a low value , but it's something acceptable to me</p><p>Cloudflare details the usage of workers that is limited in the free account for 100k req/day and 1k/min</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-view-security-headers-2020-12-24-20_37_33.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-view-security-headers-2020-12-24-20_37_33-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-view-security-headers-2020-12-24-20_37_33-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-view-security-headers-2020-12-24-20_37_33-md.png 768w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-view-security-headers-2020-12-24-20_37_33-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-view-security-headers-2020-12-24-20_37_33-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/screencapture-dash-cloudflare-9fb3653b948e447567a30f6b83e51eaf-workers-view-security-headers-2020-12-24-20_37_33-2xl.png 1600w" alt="" width="2880" height="5026"></figure><p>OKR </p><ul><li>website is managed with no database</li><li>we have serverless way to host it and with free options</li><li>overall protection from Cloudflare</li><li>security headers from Cloudflare workers, again another serveless option</li></ul><p> </p><p><code></code><code></code><code></code></p><div><div><code></code><code></code></div></div><h3>Monitor</h3><p>What is missing now ?</p><p>A bit of <strong>awareness</strong></p><p>Are we safe ? maybe but better an external opinion , around the online scanner there are multiple tools , however <a href="https://probely.com/" target="_blank" rel="noopener noreferrer">Probely</a> has a good free plan</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/Screenshot-2020-12-26-at-14.58.41.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-14.58.41-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-14.58.41-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-14.58.41-md.png 768w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-14.58.41-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-14.58.41-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-14.58.41-2xl.png 1600w" alt="" width="2866" height="1216"></figure><p>Here some hints about sensitive data shared with their crowler</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/Screenshot-2020-12-26-at-15.00.00.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.00.00-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.00.00-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.00.00-md.png 768w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.00.00-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.00.00-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.00.00-2xl.png 1600w" alt="" width="2442" height="1222"></figure><p>Nothing relevant in my case... but useful to know</p><p> </p><p>Is not time to know , how is performing the website to do this i already had a deepdive about website usability</p><p><a href="https://www.k8s.it/kubernetes-sitespeedio.html" target="_blank" rel="noopener noreferrer">https://www.k8s.it/kubernetes-sitespeedio.html</a></p><p>but again we have some other feature serverless like <a href="https://github.com/upptime/upptime" target="_blank" rel="noopener noreferrer">upptime</a> with github actions you can create a monitoring system like this <a href="https://lorenzogirardi.github.io/status/" target="_blank" rel="noopener noreferrer">https://lorenzogirardi.github.io/status/</a></p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/Screenshot-2020-12-26-at-15.04.18.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.18-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.18-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.18-md.png 768w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.18-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.18-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.18-2xl.png 1600w" alt="" width="1542" height="1166"></figure><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/Screenshot-2020-12-26-at-15.04.33.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.33-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.33-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.33-md.png 768w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.33-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.33-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.04.33-2xl.png 1600w" alt="" width="1434" height="1344"></figure><p>Another alternative is <a href="https://hetrixtools.com/" target="_blank" rel="noopener noreferrer">hetrixtools</a> , free up top 15 probes that give you the possibility to monitor your websites and smtp, and have an alerting system out of the box with a telegram bot email and sms (up to 50)</p><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/screencapture-hetrixtools-report-uptime-c7596615176a822f81d67cfddc4aa179-2020-12-26-15_14_22.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/screencapture-hetrixtools-report-uptime-c7596615176a822f81d67cfddc4aa179-2020-12-26-15_14_22-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/screencapture-hetrixtools-report-uptime-c7596615176a822f81d67cfddc4aa179-2020-12-26-15_14_22-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/screencapture-hetrixtools-report-uptime-c7596615176a822f81d67cfddc4aa179-2020-12-26-15_14_22-md.png 768w, https://www.k8s.it/media/posts/18/responsive/screencapture-hetrixtools-report-uptime-c7596615176a822f81d67cfddc4aa179-2020-12-26-15_14_22-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/screencapture-hetrixtools-report-uptime-c7596615176a822f81d67cfddc4aa179-2020-12-26-15_14_22-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/screencapture-hetrixtools-report-uptime-c7596615176a822f81d67cfddc4aa179-2020-12-26-15_14_22-2xl.png 1600w" alt="" width="2804" height="4436"></figure><figure class="post__image"><img loading="lazy" src="https://www.k8s.it/media/posts/18/Screenshot-2020-12-26-at-15.07.32.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.07.32-xs.png 300w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.07.32-sm.png 480w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.07.32-md.png 768w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.07.32-lg.png 1024w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.07.32-xl.png 1360w, https://www.k8s.it/media/posts/18/responsive/Screenshot-2020-12-26-at-15.07.32-2xl.png 1600w" alt="" width="974" height="380"></figure><p> </p><p> </p><p>Hope this post cover how the technology could be used as much as possible in a small and cheap scenario to reflect some hints to an enterprise scenario.</p><p> </p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 26 Dec 2020</p><ul class="post__tag"><li><a href="https://www.k8s.it/cloudflare/">cloudflare</a></li><li><a href="https://www.k8s.it/cms/">cms</a></li><li><a href="https://www.k8s.it/headers/">headers</a></li><li><a href="https://www.k8s.it/kubernetes/">kubernetes</a></li><li><a href="https://www.k8s.it/minio/">minio</a></li><li><a href="https://www.k8s.it/publii/">publii</a></li><li><a href="https://www.k8s.it/security/">security</a></li><li><a href="https://www.k8s.it/serverless/">serverless</a></li><li><a href="https://www.k8s.it/static/">static</a></li><li><a href="https://www.k8s.it/static-cms/">static cms</a></li><li><a href="https://www.k8s.it/website/">website</a></li><li><a href="https://www.k8s.it/workers/">workers</a></li></ul><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.k8s.it%2Fmaximum-yield-with-minimum-expense.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fwww.k8s.it%2Fmaximum-yield-with-minimum-expense.html&amp;via=LAB&amp;text=Maximum%20yield%20with%20minimum%20expense%20for%20a%20static%20website" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Fwww.k8s.it%2Fmaximum-yield-with-minimum-expense.html&amp;title=Maximum%20yield%20with%20minimum%20expense%20for%20a%20static%20website" class="js-share linkedin" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#linkedin"/></svg> <span>LinkedIn</span> </a><a href="https://buffer.com/add?text=Maximum%20yield%20with%20minimum%20expense%20for%20a%20static%20website&amp;url=https%3A%2F%2Fwww.k8s.it%2Fmaximum-yield-with-minimum-expense.html" class="js-share buffer" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#buffer"/></svg> <span>Buffer</span> </a><a href="https://api.whatsapp.com/send?text=Maximum%20yield%20with%20minimum%20expense%20for%20a%20static%20website https%3A%2F%2Fwww.k8s.it%2Fmaximum-yield-with-minimum-expense.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://www.k8s.it/authors/lgirardi/" class="invert" rel="author">lgirardi</a></h3><p>If it isn&#x27;t there, it can&#x27;t break.</p></div></div></footer></article><div class="post__comments"><div class="wrapper"><h2 class="h5">Comments</h2><div id="disqus_thread"></div><script>var disqus_config = function () {
                       this.page.url = 'https://www.k8s.it/maximum-yield-with-minimum-expense.html';
               		this.page.identifier = '18';
                   };
               
                   var disqus_loaded = false;
               
                   function publiiLoadDisqus() {
                       if(disqus_loaded) {
                           return false;
                       }
               
                       var top = document.getElementById('disqus_thread').offsetTop;
               
                       if (!disqus_loaded && (window.scrollY || window.pageYOffset) + window.innerHeight > top) {
                           disqus_loaded = true;
               
                           (function () {
                               var d = document, s = d.createElement('script');
                               s.src = 'https://.disqus.com/embed.js';
                               s.setAttribute('data-timestamp', +new Date());
                               (d.head || d.body).appendChild(s);
                           })();
                       }
                   }
               
                   publiiLoadDisqus();
               
                   window.onscroll = function() {
                       publiiLoadDisqus();
                   };</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" target="_blank" rel="nofollow noopener noreferrer">comments powered by Disqus.</a></noscript></div></div></main><footer class="footer"><div class="footer__social"><a href="https://www.linkedin.com/in/lgirardi/" aria-label="LinkedIn"><svg><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#linkedin"/></svg></a></div><div class="footer__copyright"><p>.</p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://www.k8s.it/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://www.k8s.it/assets/js/scripts.min.js?v=f4c4d35432d0e17d212f2fae4e0f8247"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="cookie-popup js-cookie-popup cookie-popup--uses-badge"><h2>This website uses cookies</h2><p>Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="#not-specified"></a></p><form><input id="gdpr-necessary" name="gdpr-necessary" checked="checked" disabled="disabled" type="checkbox"> <label for="gdpr-necessary">Required</label> <input id="gdpr-functions" name="gdpr-functions" type="checkbox"> <label for="gdpr-functions">Functionality</label> <input id="gdpr-analytics" name="gdpr-analytics" type="checkbox"> <label for="gdpr-analytics">Analytical</label> <input id="gdpr-marketing" name="gdpr-marketing" type="checkbox"> <label for="gdpr-marketing">Marketing</label><p class="cookie-popup__save-wrapper"><button type="submit" class="cookie-popup__save">Save</button></p></form><span class="cookie-popup-label">Cookie Policy</span></div><script>(function() {
                function addScript (src, inline) {
                    var newScript = document.createElement('script');

                    if (src) {
                        newScript.setAttribute('src', src);
                    }

                    if (inline) {
                        newScript.text = inline;
                    }

                    document.body.appendChild(newScript);
                }

                var popup = document.querySelector('.js-cookie-popup');
                var checkboxes = popup.querySelectorAll('input[type="checkbox"]');
                var save = popup.querySelector('button');
                var currentConfig = localStorage.getItem('publii-gdpr-allowed-cookies');
                var blockedScripts = document.querySelectorAll('script[type^="gdpr-blocker/"]');
                

                popup.addEventListener('click', function() {
                    if (!popup.classList.contains('cookie-popup--is-sticky')) {
                        popup.classList.add('cookie-popup--is-sticky');
                    }
                });

                save.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    popup.classList.remove('cookie-popup--is-sticky');
                    var allowedGroups = [];

                    for (var i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i].checked) {
                            var groupName = checkboxes[i].getAttribute('name').replace('gdpr-', '');
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + groupName + '"]');

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }

                            allowedGroups.push(groupName);
                        }
                    }

                    localStorage.setItem('publii-gdpr-allowed-cookies', allowedGroups.join(','));
                    popup.classList.remove('cookie-popup--is-sticky');

                    setTimeout(function () {
                        if (currentConfig !== null) {
                            window.location.reload();
                        }
                    }, 250);
                });

                if (currentConfig === null) {
                    popup.classList.add('cookie-popup--is-sticky');
                } else {
                    if (currentConfig !== '') {
                        var allowedGroups = currentConfig.split(',');

                        for (var i = 0; i < allowedGroups.length; i++) {
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroups[i] + '"]');
                            var checkbox = popup.querySelector('input[type="checkbox"][name="gdpr-' + allowedGroups[i] + '"]');

                            if (checkbox) {
                                checkbox.checked = true;
                            }

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }
                        }
                    }
                }
            })();</script></body></html>